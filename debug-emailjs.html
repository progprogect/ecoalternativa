<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢–µ—Å—Ç EmailJS</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 600px; margin: 50px auto; padding: 20px; }
        .form-group { margin: 15px 0; }
        label { display: block; margin-bottom: 5px; font-weight: bold; }
        input, textarea { width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px; }
        button { background: #007bff; color: white; padding: 12px 30px; border: none; border-radius: 4px; cursor: pointer; }
        button:hover { background: #0056b3; }
        .log { background: #f8f9fa; border: 1px solid #dee2e6; padding: 15px; margin: 20px 0; border-radius: 4px; }
        .error { color: #dc3545; }
        .success { color: #28a745; }
        .info { color: #17a2b8; }
    </style>
</head>
<body>
    <h1>üß™ –¢–µ—Å—Ç EmailJS –¥–ª—è ecoalternativa.ru</h1>
    
    <form id="testForm">
        <div class="form-group">
            <label for="name">–ò–º—è:</label>
            <input type="text" id="name" name="name" value="–¢–µ—Å—Ç–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å" required>
        </div>
        
        <div class="form-group">
            <label for="phone">–¢–µ–ª–µ—Ñ–æ–Ω:</label>
            <input type="tel" id="phone" name="phone" value="+7 999 123-45-67" required>
        </div>
        
        <div class="form-group">
            <label for="email">Email:</label>
            <input type="email" id="email" name="email" value="test@example.com">
        </div>
        
        <div class="form-group">
            <label for="volume">–û–±—ä–µ–º (—Ç–æ–Ω–Ω):</label>
            <input type="number" id="volume" name="volume" value="10">
        </div>
        
        <div class="form-group">
            <label for="comment">–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π:</label>
            <textarea id="comment" name="comment" rows="3">–¢–µ—Å—Ç–æ–≤–∞—è –∑–∞—è–≤–∫–∞ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ EmailJS</textarea>
        </div>
        
        <button type="submit">üìß –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Ç–µ—Å—Ç</button>
    </form>
    
    <div id="log" class="log">
        <h3>üìù –õ–æ–≥ –æ—Ç–ª–∞–¥–∫–∏:</h3>
        <div id="logContent">–ù–∞–∂–º–∏—Ç–µ "–û—Ç–ø—Ä–∞–≤–∏—Ç—å —Ç–µ—Å—Ç" –¥–ª—è –Ω–∞—á–∞–ª–∞ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏...</div>
    </div>

    <!-- EmailJS -->
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
    
    <script>
        // –ù–∞—Å—Ç—Ä–æ–π–∫–∏ EmailJS (–∫–∞–∫ –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ)
        const emailJSConfig = {
            serviceId: 'service_kc39cmi', 
            templateId: 'template_eouf19q', 
            publicKey: 'qhL-cAKscZ7nMqAdq'
        };
        
        let logContent = document.getElementById('logContent');
        
        function addLog(message, type = 'info') {
            const timestamp = new Date().toLocaleTimeString();
            const className = type === 'error' ? 'error' : type === 'success' ? 'success' : 'info';
            logContent.innerHTML += `<div class="${className}">[${timestamp}] ${message}</div>`;
            console.log(`[${timestamp}] ${message}`);
        }
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        document.addEventListener('DOMContentLoaded', function() {
            addLog('üöÄ –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–∞');
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ EmailJS
            if (typeof emailjs !== 'undefined') {
                addLog('‚úÖ EmailJS –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–∞');
                try {
                    emailjs.init(emailJSConfig.publicKey);
                    addLog('‚úÖ EmailJS –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω —Å –∫–ª—é—á–æ–º: ' + emailJSConfig.publicKey);
                } catch (error) {
                    addLog('‚ùå –û—à–∏–±–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ EmailJS: ' + error.message, 'error');
                }
            } else {
                addLog('‚ùå EmailJS –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –ù–ï –∑–∞–≥—Ä—É–∂–µ–Ω–∞!', 'error');
            }
        });
        
        // –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–æ—Ä–º—ã
        document.getElementById('testForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            logContent.innerHTML = '<h4>üß™ –ù–∞—á–∏–Ω–∞–µ–º —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ...</h4>';
            
            // –ü–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ —Ñ–æ—Ä–º—ã
            const formData = new FormData(this);
            const data = Object.fromEntries(formData);
            
            addLog('üìã –î–∞–Ω–Ω—ã–µ —Ñ–æ—Ä–º—ã –ø–æ–ª—É—á–µ–Ω—ã: ' + JSON.stringify(data));
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º EmailJS
            if (typeof emailjs === 'undefined') {
                addLog('‚ùå EmailJS –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω!', 'error');
                return;
            }
            
            // –§–æ—Ä–º–∏—Ä—É–µ–º –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è —à–∞–±–ª–æ–Ω–∞
            const templateParams = {
                to_email: 'progprogect@gmail.com',
                subject: 'üß™ –¢–µ—Å—Ç–æ–≤–∞—è –∑–∞—è–≤–∫–∞ —Å –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã',
                timestamp: new Date().toLocaleString('ru-RU'),
                source: '–î–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞',
                client_name: data.name || '–ù–µ —É–∫–∞–∑–∞–Ω–æ',
                client_phone: data.phone || '–ù–µ —É–∫–∞–∑–∞–Ω',
                client_email: data.email || '–ù–µ —É–∫–∞–∑–∞–Ω',
                client_volume: data.volume || '–ù–µ —É–∫–∞–∑–∞–Ω',
                client_comment: data.comment || '–ë–µ–∑ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è',
                full_message: `–¢–µ—Å—Ç–æ–≤–∞—è –∑–∞—è–≤–∫–∞ –æ—Ç ${data.name}\n–¢–µ–ª–µ—Ñ–æ–Ω: ${data.phone}\nEmail: ${data.email}\n–û–±—ä–µ–º: ${data.volume} —Ç–æ–Ω–Ω\n–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π: ${data.comment}`
            };
            
            addLog('üì§ –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏: ' + JSON.stringify(templateParams, null, 2));
            
            try {
                addLog('‚è≥ –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —á–µ—Ä–µ–∑ EmailJS...');
                
                const result = await emailjs.send(
                    emailJSConfig.serviceId,
                    emailJSConfig.templateId,
                    templateParams
                );
                
                addLog('üéâ –£–°–ü–ï–•! Email –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω —á–µ—Ä–µ–∑ EmailJS', 'success');
                addLog('üìã –†–µ–∑—É–ª—å—Ç–∞—Ç: ' + JSON.stringify(result), 'success');
                addLog('üì¨ –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ—á—Ç—É progprogect@gmail.com', 'success');
                
            } catch (error) {
                addLog('‚ùå –û–®–ò–ë–ö–ê EmailJS: ' + error.message, 'error');
                addLog('üîç –î–µ—Ç–∞–ª–∏ –æ—à–∏–±–∫–∏: ' + JSON.stringify(error), 'error');
                
                // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
                if (error.message.includes('Invalid public key')) {
                    addLog('üí° –í–æ–∑–º–æ–∂–Ω–æ –Ω–µ–≤–µ—Ä–Ω—ã–π –ø—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á', 'error');
                } else if (error.message.includes('Service not found')) {
                    addLog('üí° –í–æ–∑–º–æ–∂–Ω–æ –Ω–µ–≤–µ—Ä–Ω—ã–π Service ID', 'error');
                } else if (error.message.includes('Template not found')) {
                    addLog('üí° –í–æ–∑–º–æ–∂–Ω–æ –Ω–µ–≤–µ—Ä–Ω—ã–π Template ID', 'error');
                }
            }
        });
    </script>
</body>
</html> 